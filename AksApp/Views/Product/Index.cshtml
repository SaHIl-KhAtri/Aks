@using Azure.Core;
@model DummyProduct
@{
    ViewBag.Title = "Index";
}

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>AKS Machine Test</title>
    <!-- slider start -->
    <!-- slider end -->
    <link rel="stylesheet" href="../css/style.css">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="html5.js"></script>
    <![endif]-->
    <!--[if lt IE 7.]>
    <script defer type="text/javascript" src="pngfix1.js"></script>
    <![endif]-->
    <!-- Menu start --------------->
    <link href="../menu/quickmenu0.css" rel="stylesheet" type="text/css" media="screen" />
    <script type="text/javascript" src="../menu/quickmenu0.js"></script>
    <script src="https://cdn.ckeditor.com/ckeditor5/36.0.1/classic/ckeditor.js"></script>
    <!-- Menu End --------------->
    <style>
        table {
            counter-reset: rowNumber;
        }

            table tr td:first-child::before {
                content: counter(rowNumber);
                counter-increment: rowNumber;
            }
    </style>
</head>
<body>
    <header>
        <div id="wrap">
            <div class="logo"><img src="../images/logo.png" border="0"></div>
            <div class="topmenu">
                <ul>
                    <li><a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></li>
                    <li><a a asp-controller="ChangePassword" asp-action="Index">Change Password</a> |</li>
                    <li><a asp-controller="Admin" asp-action="LogOut"><img src="../images/logout.png" width="16" height="16" border="0" align="absmiddle">&nbsp;&nbsp;Logout</a></li>
                </ul>
                <div class="clear"></div>
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </header>
    <nav>
        <ul id="qm0" class="qmmc">
            <li><a asp-controller="Admin" asp-action="admin">Dashboard</a></li>

            <li>
                <a href="#" class="qmactive">Product</a>
                <ul>
                    <li><a asp-controller="Category" asp-action="Create">Add Category</a></li>
                    <li><a asp-controller="SubCategory" asp-action="Create">Add  Sub Category</a></li>

                    <li><a asp-controller="Product" asp-action="Index">Add Product</a></li>
                </ul>
            </li>

            <!--
            <li><a href="#">CCTV</a>
                <ul>
                  <li><a href="product-brand.html">Add Brand</a></li>
                  <li><a href="cctv.html">Add Product</a></li>
                </ul>
            </li> -->
        </ul>
    </nav>

    <form method="post" asp-action="Create" enctype="multipart/form-data">
        <h3 style="color: red">@TempData["fieldnotfilled"]</h3>
    <div id="wrap">
        <div class="clear" style="height:5px;"></div>
        <div id="wrap2">
            <h1>Add Product</h1>
            <br>

            <div class="form-raw">
                <div class="form-name">Select Category</div>
                <div class="form-txtfld">
                        <select asp-for="CategoryName" id="CategoryList" asp-items="@ViewBag.CategoryList" >
                            <option >--Select Category--</option>
                        </select>
                        
                </div>
            </div>
            <div class="clear"></div>


            <div class="form-raw">
                <div class="form-name">Select Sub Category</div>
                <div class="form-txtfld">
                    <select asp-for="SubCategoryName" id="subcategory">
                        <option value="-1">--Select SubCategory--</option>
                    </select>
                </div>
            </div>
            <div class="clear"></div>



            <div class="form-raw">
                <div class="form-name">Product Name</div>
                <div class="form-txtfld">
                    <input asp-for="ProductName" type="text">
                </div>
            </div>

            <div class="form-name">Product Image1</div>
            <div class="form-txtfld">
                <input asp-for="Image" type="file">
                <div class="form-name"> Image Size ( Width=560px, Height=390px ) (Product page)</div>
            </div>
        </div>
        <div class="form-raw" style="width:100%;">
            <div class="form-name">Short Description</div>
            <div class="form-txtfld">
                <textarea asp-for="ShortDescription"></textarea>
            </div>
        </div>

        <div class="clear"></div>
        <h1 style="border-bottom: 1px solid #CCC; padding-bottom: 10px; margin: 20px 0 0px 0;">Description</h1>
        <br>
        <div>
            <div class="field_wrapper" id="remov">
                <div>
                    <div class="form-raw">
                        <div class="form-name"> &nbsp;</div>
                        <div class="form-txtfld">
                            <input name="Description[0].Title" type="text" placeholder="Title">
                        </div>
                    </div>
                    <div class="form-raw">
                        <div class="form-name">&nbsp;</div>
                        <div class="form-txtfld txtfld50"><input name="Description[0].Heading" type="text" placeholder="heading"></div>
                        <div class="form-txtfld txtfld50"><input name="Description[0].description" type="text" placeholder="desciption"></div>
                            
                    </div>
                </div>
            </div>
                <div class="form-raw">
                    <div class="form-name">&nbsp;</div>
                    <div class="form-txtfld" style="width: 320px; text-align: right;"><a class="add_button" href="#">Add More +</a></div>
                </div>
         </div>






        <!--  <div class="form-raw">
             <div class="form-name">&nbsp;</div>
             <div class="form-txtfld txtfld50"><input type="text" placeholder="heading"></div>
             <div class="form-txtfld txtfld50"><input type="text" placeholder="desciption"></div>
             <a href="#"><img src="images/delete.gif" alt=""></a>
         </div> -->







        <div class="clear"></div>
        <h1 style="border-bottom: 1px solid #CCC; padding-bottom: 10px; margin: 20px 0 0px 0;">Features</h1>
        <br>
        <div class="form-raw" style="width:100%;">
            <div class="form-name">Content</div>
            <div class="form-txtfld" style="width:780px;">
                <textarea asp-for="CkEditorContent" id="editor" style="width:100%; height:500px;">CK</textarea>
            </div>
        </div>
        <div class="clear"></div>
        <h1 style="border-bottom: 1px solid #CCC; padding-bottom: 10px; margin: 20px 0 0px 0;">Upload PDF</h1>
        <br>
        <div class="wrapper_field">
            <div class="form-raw ">
                <div class="form-name">&nbsp;</div>
                    <div class="form-txtfld txtfld50"><input type="text" name="pdf[0].Heading" placeholder="PDF heading"></div>
                    <div class="form-txtfld txtfld50"><input type="file" name="pdf[0].Files" placeholder="desciption"></div>
            </div>
        </div>

        <div class="form-raw">
            <div class="form-name">&nbsp;</div>
            <div class="form-txtfld" style="width: 320px; text-align: right;"><a class="buttonAdd" href="#">Add More +</a></div>
        </div>


        <!-- <div class="form-raw">
          <div class="form-name">Heading</div>
          <div class="form-txtfld">
            <input type="text">
          </div>
        </div>
         <div class="form-raw">
          <div class="form-name">PDF</div>
          <div class="form-txtfld">
            <input type="file">
          </div>
        </div> -->



        <div class="clear"></div>
        <div class="form-raw">
            <div class="form-name">Active</div>
            <div class="form-txtfld">
                <input asp-for="isActive" type="checkbox">
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
        <div class="form-raw">
            <div class="form-name">&nbsp;</div>
            <div class="form-txtfld">
                <input type="submit" class="btn" value="Submit">
            </div>
        </div>
    </div>
    </form>



    <div class="clear">&nbsp;</div>
    </div>
    <div id="wrap2">
        <table width="100%" border="0" cellspacing="0" cellpadding="0" class="admintable">
            <tr>
                <th width="53" align="left" valign="middle">Sr.No.</th>
                <th width="153" align="left" valign="middle">Select Category</th>
                <th width="71" align="left" valign="middle"> Select Sub Category</th>
                <th width="71" align="left" valign="middle"> Product Name</th>

                <th width="408" align="left" valign="middle">Short Description</th>
              <!--
                    <th width=" " align="left" valign="middle">Full Description</th>
              -->  
                <th width="49" align="left" valign="middle">Status</th>

                <th width="49" align="left" valign="middle">Edit</th>
                <th width="61" align="left" valign="middle">Remove</th>
            </tr>
            @foreach (var i in (List<Product>)ViewData["ProductData"])
            {
                
            <tr>
                <td align="left" valign="top"></td>
                <td align="left" valign="top">@i.CategoryName</td>
                    <td align="left" valign="top">@i.SubCategoryName</td>
                <td align="left" valign="top">@i.ProductName</td>
                <td align="left" valign="top">@i.ShortDescription</td>

                <!--<td align="left" valign="top">fdfd</td> -->


                <td align="left" valign="top"><strong>@i.isActive</strong></td>
                    <td align="left" valign="top"><a asp-controller="Product" asp-action="Edit" asp-route-id="@i.ProductId">Edit</a></td>
                <td align="center" valign="top"><a href="#"><img src="../images/icon-bin.jpg" alt="" width="25" height="25" border="0" align="absmiddle" /></a></td>
            </tr>
            }
        </table>
        <div class="clear">&nbsp;</div>
    </div>
    <div class="clear"></div>
    <footer>
        <footer class="whitefoter">
            <div class="whitefooter-cont">
                <div style="float:left;">Copyright © AKS Machine Test. All Rights Reserved.</div>
                <a href="https://www.akswebsoft.com/" target="_blank" style="float:right;"> <img src="../images/akslogo.png" alt="AKS Websoft Consulting Pvt. Ltd." title="AKS Websoft Consulting Pvt. Ltd."></a>
                <div class="clear"></div>
            </div>
        </footer>
    </footer>
    <a href="~/lib/jquery/dist/jquery.min.map">~/lib/jquery/dist/jquery.min.map</a>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery/dist/jquery.js"></script>

    <script>
        $(document).ready(function(){
            $("#CategoryList").change(function () {
                $("#subcategory").empty();
                $.ajax({
                    type:"GET",
                    url: '@Url.Action("GetSubCategoryList")',
                    dataType: 'json',
                    data: { CategoryId: $('#CategoryList').val() },
                    success: function(response){
                        $("#subcategory").append('<option value="' + -1 + '">'+
                        "Select Subcategory" + '</option');

                        $.each(response, function(i, respons){
                            $("#subcategory").append('<option value='+ respons.text +'>'+
                            respons.text +'</option>');
                        });
                    }

                });

            });
        });
        
        $(document).ready(function() {
            var maxField = 10;
            var addButton = $('.add_button');
            var wrapper  = $('.field_wrapper');
            var x = 1;
            function getField() {
            return`
                

                    <div class="form-raw" id="remov">
                        <div class="form-raw">
                            <div class="form-name"> &nbsp;</div>
                                <div class="form-txtfld">
                                        <input name="Description[${x}].Title" type="text" placeholder="Title">
                            </div>
                        </div>
                        <div class="form-name">&nbsp;</div>
                        <div class="form-txtfld txtfld50"><input name="Description[${x}].Heading" type="text" placeholder="heading"></div>
                                <div class="form-txtfld txtfld50"><input name="Description[${x}].description" type="text" placeholder="desciption"></div>
                        <a href="#" class="remove_button"><img src="../images/delete.gif" alt=""></a>
                    </div>
                        
                
                    
                    `;
                    }
            $(addButton).click(function(){
                if(x<maxField){
                    $(wrapper).append(getField);
                    x++;
                }
            });

            $(wrapper).on('click', '.remove_button', function(e){
                e.preventDefault();
                $(this).parent("div").remove();
                x--;
            });

        });



        $(document).ready(function () {
            var lengthField = 10;
            var buttonAdd = $('.buttonAdd');
            var wrapperAdd = $('.wrapper_field');
            var a = 1;
            function getField() {
                return `

                <div class="form-raw ">
                    <div class="form-name">&nbsp;</div>
                    <div class="form-txtfld txtfld50" ><input  type="text" name="pdf[${a}].Heading" placeholder="PDF heading"></div>
                            <div class="form-txtfld txtfld50"><input  type="file" name="pdf[${a}].Files" placeholder="desciption"></div>
                    <a class="button_remove" href="#"><img src="../images/delete.gif" alt=""></a>
                </div>    
                `;
            }
            $(buttonAdd).click(function () {
                if (a < lengthField) {
                    
                    $(wrapperAdd).append(getField);
                    a++;
                }
            });

            $(wrapperAdd).on('click', '.button_remove', function (e) {
                e.preventDefault();
                $(this).parent("div").remove();
                x--;
            });

        });

    </script>
   
    <script>
        ClassicEditor
            .create(document.querySelector('#editor'))
            .catch(error => {
                console.error(error);
            });
    </script>


</body>
</html>